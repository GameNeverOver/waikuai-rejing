"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const codeTransform_1 = require("../utils/codeTransform");
function tsTransformerLoader(source) {
    // const {buildAdapter} = getOptions(this)
    const filePath = this.resourcePath;
    try {
        // @ts-ignore
        const { code, ast } = codeTransform_1.getTransformResult({
            code: source,
            sourcePath: filePath
        });
        this.callback(null, code, ast);
        return code;
    }
    catch (error) {
        this.emitError(error);
        this.callback(null, source, null);
        return source;
    }
}
exports.default = tsTransformerLoader;
